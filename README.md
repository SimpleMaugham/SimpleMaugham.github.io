# 马年红包扫雷

一款纯网页红包扫雷游戏，单文件即可运行，支持手机分享打开。马年新春主题，红红火火喜庆风格。

## 快速开始

1. 将 `斗地主.mp3` 放入项目根目录（与 `index.html` 同级）
2. 直接双击 `index.html` 用浏览器打开
3. 或分享 `index.html` 和 `斗地主.mp3` 给他人，对方用手机/电脑浏览器打开即可游玩

**说明**：项目支持单文件或多文件（HTML/CSS/JS），入口为 `index.html`，无 Python 依赖。

## 功能特性

### 红包类型（N 个红包中）

| 类型 | 数量 | 效果 |
|------|------|------|
| 金钱 | N-5 个 | 点击获得随机金额，总额为每局预算 |
| 地雷 | 1 个 | 显示地雷后爆炸，当前局金额清空 |
| 礼花 | 2 个 | 其一：满屏烟花，获得本局所有红包；其二：弹出祝福弹窗 |
| 马年祝福（健康） | 1 个 | 显示“马年健康，龙马精神” |
| 马年祝福（财运） | 1 个 | 显示“马年发财，财源滚滚” |
| 特殊惊喜 | 1 个 | 弹窗："祝卢总新年发大财，Offer拿到手软" |

### 游戏规则

- **管理员设置**：密码 `123`，输入后可设置：
  - 红包个数 N（6–50）
  - 预计总金额 X（元）
  - 局数 Y
- **红包生成**：N-5 个有金额，总额 = X/Y，金额随机分配
- **玩家操作**：点击红包；点到雷则当前局金额清空；点到礼花则获得本局全部红包；可点击「进入下一局」结算
- **安全提示**：连续 5 次未踩雷时，提示「亲，见好就收哦，小心踩雷」

### 默认配置

- 红包个数：20
- 总金额：200 元
- 局数：10

## 界面与风格

- 马年新春红金配色
- 除夕夜晚深色背景、星光点缀
- 喜庆红包封面
- 地雷爆炸、礼花绽放等动效
- 背景音乐：使用项目根目录 `斗地主.mp3`，页面加载即播放，音量 40%

## 文件结构

```
red_bag/
├── index.html           # 游戏主文件（入口）
├── 斗地主.mp3           # 背景音乐（需自行放置）
├── req.md               # 需求文档
└── README.md            # 本说明
```

## 修改记录

> 每次修改后，将修改内容、修改前与修改后状态记录于此。

| 日期 | 修改内容 | 修改前 | 修改后 |
|------|----------|--------|--------|
| - | 初始版本 | - | 根据 req.md 需求完成游戏开发 |
| - | 编码与音乐 | 音乐嵌入 Base64，中文出现乱码 | 恢复 SoundHelix 在线音乐，使用 UTF-8 编码修复中文显示 |
| - | 新需求（req.md 变更） | SoundHelix 在线音乐；仅允许单文件 | 背景音乐改为项目根目录 `恭喜你发财.mp3`，加载即播，音量 40%；允许多文件（HTML/CSS/JS），入口为 HTML |
| - | 修复中文乱码 | 页面中文字符显示为问号等乱码 | 使用 Python 脚本以 UTF-8 编码重写所有中文文案，确保浏览器正常显示 |
| - | 红包封面效果（req 2） | 红包封面有福字 | 移除福字，改用新年红包花纹：金线斜纹、顶部金边、内框描边、中心光晕装饰 |
| - | 再次修复中文乱码 | 编辑后中文又出现乱码 | 运行 fix_encoding.py 以 UTF-8 重写，并添加 BOM |
| - | 红包封面 | 未拆红包显示问号 | 去掉问号，仅保留花纹装饰 |
| - | 特效图标 | 地雷/礼花/惊喜显示为文字 | 改为 emoji 图标：💣地雷、🎆礼花、🎁惊喜，配脉动动画 |
| - | 修复乱码 | 编辑后中文乱码 | 运行 fix_utf8.py 以 UTF-8 重写并添加 BOM |
| - | 红包点开效果（req 2） | 红包点开仅显示金额 | 金钱红包显示祝福字+金额，祝福红包显示祝福字+原文案；祝福字从「新年快乐」「恭喜发财」「龙马精神」「万事如意」「身体健康」中随机 |
| - | 背景音乐 | 恭喜你发财.mp3 | 改为斗地主.mp3 |
| - | 红包字效果（req 2） | 点开显示整个词语 | 改为从「新年快乐」「恭喜发财」「龙马精神」「万事如意」「身体健康」中随机选一个字 |
| - | 修复乱码 | 编辑后中文再次乱码 | 运行 fix_encoding.py 全面修复，UTF-8 重写并加 BOM |
